Quick sanity check (Target & Toolchain) Minecraft Java 1.21.11 gibt’s wirklich (Release “Mounts of Mayhem”, 09.12.2025).   Fabric/Loom: Fabric-Doku ist bereits auf 1.21.11 ausgerichtet (Loom-Seite + Mapping-Migration).   Zusätzlich ist im Fabric-Dev-Guide für 1.21.11 u.a. ein empfohlenes Loom (1.15-SNAPSHOT) und ein fabric_api_version Beispiel für 1.21.11 dokumentiert.   IntelliJ “Minecraft Development” Plugin: aktiv gepflegt, mit Fabric/Mixins/Access-Widener/Class-Tweaker Support.   NeoForge Toolchain (für später): ModDevGradle/NeoGradle sind offiziell dokumentiert; Plugin net.neoforged.moddev existiert im Gradle Plugin Portal.   Pfad-Entscheidung 2026-02 (wichtig wegen Versionsrealität) Für 1.21.11 ist Pfad B (VS2-Backend) aktuell praktisch blockiert: die offiziellen VS2-Releases sind (Stand Feb 2026) auf 1.20.1 (Fabric/Forge) gelistet.   → Heißt: MVP auf 1.21.11 = Pfad A oder C. Ich würde C nehmen: MVP-Contraption heute, VS-Backend später, wenn VS2 tatsächlich auf 1.21.x/1.21.11 stabil verfügbar ist.  Zwei MVP-Korrekturen, die dir später Wochen sparen 1) “SailBlockEntity” passt nicht zu “Blocks aus Welt entfernen” Wenn ihr beim Launch Blöcke aus der Welt entfernt, existieren normale BlockEntities nicht mehr. Für Segel/Repair braucht ihr daher im MVP besser:  Virtual-Parts State im ShipEntity (z.B. Long2IntMap relPosPacked -> integrity).  Interaktion über Ship-RayCast: Hit im Welt-Raum → Ship-Local → relBlockPos → öffne ScreenHandler auf Server, der in Ship-Daten schreibt.  BlockEntity könnt ihr später wieder einführen, wenn ihr ein Backend habt, das wirklich “moving world blocks” kann (z.B. VS).  2) Passenger-Stability: “localPos speichern” reicht nicht – du willst “delta-preserving” Der Trick, damit Walking auf rotierendem Deck nicht kaputtgeht:  Pro Tick (server):  T0 = shipTransform before physics  Lasse vanilla player movement laufen (oder sammle playerPosBefore, playerPosAfter).  Rechne nach dem Move: localAfter = inverse(T0) * playerPosAfter  Update Ship-Physik → T1  Setze: playerPosNew = T1 * localAfter (und optional playerYaw += (yaw1 - yaw0))  Damit bleibt die Spielerbewegung relativ zum Deck erhalten, während das Schiff sich bewegt/rotiert.  “Weltkontakt” als harte, testbare Regel (MVP) Deine pragmatische Definition ist gut – ich würde sie nur minimal präzisieren, damit sie nicht “mysteriös” wirkt:  Assembly FAIL, wenn es ein Ship-Block s gibt und eine der 6 Nachbarpositionen n:  n ist nicht im Ship-Set und  world.getBlockState(n).getCollisionShape(world, n) ist nicht leer (optional: n in Tag sharkengine:ignore_world_contact ausnehmen, z.B. Wasser/Gras)  So bekommt ihr saubere Boundaries + “touching anything solid blocks assembly”.  Konkrete Minimal-Architektur (C-fähig, A-ready) Core API (loader-/backend-neutral) ShipAssemblyService  collectStructure(wheelPos) -> ShipBlueprint  validateWorldContact(blueprint) -> contactPoints  commitAssemble(blueprint) -> ShipId  ShipBackend (Interface)  spawnShip(blueprint, initialTransform) -> ShipHandle  tickShipPhysics(handle, inputs)  raycastVirtualBlocks(handle, from,to) -> Hit  ShipStateStore  speichert Blueprint + PartStates + RuntimeState (NBT/Codec), damit Chunk-Unload/Reload kein Dupe erzeugt.  MVP Backend (Contraption Entity) Blocks werden atomar entfernt (Server-only Transaction):  Validate (chunks loaded, limits, world contact)  Snapshot (BlockState + optional whitelisted data)  Remove blocks (ohne Drops)  Spawn ShipEntity + persist ShipState  Rendering: client-side “block render in entity renderer” (erstmal iterativ; später mesh-bake + dirty regions).  Collision: MVP “good enough”  Start: Bounding Sphere oder AABB + block-scan im swept volume  Ziel: 2–3 primitive shapes (Hull/Deck) in Ship-local, getestet gegen world blocks via broadphase AABB.  Damage/Repair MVP SailPart = (relPos, integrity 0..100, visualStage)  Treffer: reduce integrity; mark “render dirty”  Repair UI (loom-like):  Server: ScreenHandler schreibt in ShipStateStore (Material rein → integrity hoch)  Client: zeigt Stage/HP  Setup-Empfehlung (passt zu deinem Abschnitt 5C, aber “2026-proof”) IntelliJ IDEA + Minecraft Development Plugin (Mixin/Inspection/Generator etc.).   Fabric Loom für 1.21.11 (Doku ist darauf abgestimmt).   Rechne mittelfristig mit dem “post-1.21.11” Mapping/Build-Shift (Fabric spricht offen über den Übergang nach 1.21.11).   Wenn du willst, kann ich als nächsten Schritt direkt liefern: Konkrete Datenformate (Packing relPos, NBT/Codec-Schema für Blueprint + PartStates),  Packet-Plan (Spawn/Blueprint-chunks, Transform deltas, interaction packets),  Tick-Reihenfolge (Ship-phys → passenger adjust → net sync) als kurze, implementierbare Spec.   Du: wie baue ich es konkret und wo  Minecraf Mods sagte:  Nachgedacht für 2m 20s Meinst du “wie baue ich den Mod (Projekt/Build/Jar) konkret – und wohin kommt was (Ordner/Files/mods-Folder)?” Dann so:  1) Was du lokal brauchst JDK 21 (für Mod-Dev auf Minecraft 1.21.11).   IntelliJ IDEA + Plugin “Minecraft Development”.   (Optional) Git, wenn du mit Templates/Repos arbeitest.   2) Projekt erzeugen (schnellster Weg) Option A (empfohlen): Fabric Template Mod Generator Geh auf den Fabric Template Mod Generator und generiere ein Projekt-Zip.   Nimm als Ziel Minecraft 1.21.11.  Mappings: Für ein “2026-safe” Projekt würde ich Mojang Mappings nehmen (weil nach 1.21.11 der Unobfuscation-Wechsel kommt).   (Yarn geht bei 1.21.11 noch, ist aber “End of the line”.  )  Welche Versionen eintragen? Fabric Loader: nimm Latest (aktuell z.B. 0.18.4).   Fabric API: orientiere dich an der Develop-Empfehlung (z.B. fabric_api_version=0.141.3+1.21.11).   Loom: empfohlen 1.15-SNAPSHOT.   Yarn (nur falls du Yarn nutzt): yarn_mappings=1.21.11+build.3.   3) In IntelliJ öffnen & “wo kommt was hin” Projektordner entpacken nach z.B. C:\Projects\SharkEngine (kein OneDrive, keine Sonderzeichen).   Ordnerstruktur (wichtigste Stellen):   <projekt>/   build.gradle   gradle.properties   settings.gradle   src/main/java/...   src/main/resources/     fabric.mod.json     <deinmod>.mixins.json    (wenn du Mixins nutzt)     assets/<modid>/...     data/<modid>/tags/blocks/... Dein Code (Java):  src/main/java/<dein/package>/SharkEngineMod.java (Entry Point / ModInitializer)  sinnvolle Pakete z.B.:  assembly/ (BFS + World-Contact Check)  ship/ (ShipEntity + Runtime)  net/ (Packets)  content/ (WheelBlock, Items, Registries)  ui/ (Repair ScreenHandler)  Deine Tags (für BFS/Blacklist):  src/main/resources/data/<modid>/tags/blocks/ship_eligible.json  src/main/resources/data/<modid>/tags/blocks/ship_blacklist.json  4) Dev starten (Client/Server) Per Gradle (geht immer) ./gradlew runClient ./gradlew runServer Loom generiert dafür Run-Konfigurationen; in IntelliJ kannst du direkt “Minecraft Client/Server” starten.   Wo liegen deine Test-Welten/Logs? Im Dev-Run-Verzeichnis run/ (z.B. run/saves, run/logs). (Das ist Loom-Standardverhalten; sichtbar sobald du einmal gestartet hast.)   5) “Build” machen (Jar erzeugen) Für ein Release-Jar:  ./gradlew build Das Ergebnis liegt in:  build/libs/ (“build” ist der richtige Task für Endnutzer-Jars; remapJar ist Teil davon.)   6) Wo installiere ich den Jar? Singleplayer / Client Kopiere build/libs/<deinmod>-<version>.jar nach:  Windows: %appdata%\.minecraft\mods  Linux: ~/.minecraft/mods  macOS: ~/Library/Application Support/minecraft/mods  Und stelle sicher:  Fabric Loader ist installiert (Fabric Installer).   Fabric API ist im mods/ Ordner, falls dein Mod sie braucht.   Dedicated Server Server-Root:  mods/ Ordner erstellen (falls nicht vorhanden)  Mod-Jar hinein  Client braucht ihn meist auch, wenn du Entities/Rendering/GUI hast (bei euch: ziemlich sicher ja).  Mini-Check: Läuft dein Projekt korrekt? ./gradlew runClient startet ohne Mapping/Gradle Fehler  im Log steht deine Mod-ID aus fabric.mod.json  ./gradlew build erzeugt Jar in build/libs  Wenn du mit “wo” eher meinst “wo im Spiel baue ich die Struktur, damit Assembly klappt (World-Contact)”, sag kurz Bescheid – dann geb ich dir ein paar praktische Bau-Regeln/Debug-Overlays fürs MVP (z.B. “Kontaktpunkte highlighten”).   Du: ja wie bekomme ich es von hier ins spiel zum ausprobieren?  Minecraf Mods sagte:  Nachgedacht für 10s Alles klar — du hast jetzt ein Mod-Projekt “hier” (in IntelliJ/Gradle). Zum Ausprobieren im Spiel hast du zwei gute Wege:  Weg 1 (am schnellsten): Direkt aus dem Projekt starten (Dev-Run) Damit brauchst du nichts nach .minecraft/mods kopieren.  Projekt in IntelliJ öffnen  Öffne den Projektordner (da wo build.gradle liegt).  In IntelliJ: Gradle-Fenster → “Reload/Refresh”.  Client im Dev-Modus starten  Terminal im Projekt:  ./gradlew runClient oder in IntelliJ: Gradle Tasks → fabric/loom → runClient (je nach Ansicht).  ➡️ Das startet ein Minecraft mit deinem Mod bereits aktiv. Loom richtet dafür ein eigenes run/-Verzeichnis ein (eigene Saves/Configs/Mods).   Zum Testen: Mod-Menü / Logs checken  In der Konsole sollte stehen, dass dein Mod geladen wurde (Mod-ID aus fabric.mod.json).  Multiplayer im Dev (lokal) In zwei Terminals:  ./gradlew runServer ./gradlew runClient Dann im Client auf localhost joinen. (Server ist dann authoritative wie bei dir geplant.)   Weg 2: “Echt” in deinen normalen Launcher installieren (Release-Test) Wenn du testen willst wie später bei Spielern:  Jar bauen  ./gradlew build Danach liegt dein Mod-Jar in:  build/libs/ (du willst üblicherweise das “normale” Jar; build erledigt das.)   Fabric Loader für 1.21.11 installieren  Fabric Installer laden und im Installer Minecraft Version 1.21.11 + Fabric Loader auswählen.   (Loader ist versionsunabhängig-ish, aber nimm “Latest”; z.B. 0.18.4 ist als “Latest” gelistet.)   Fabric API dazu (falls dein Mod sie nutzt)  Für 1.21.11 gibt es z.B. Fabric API 0.140.0+1.21.11.   Jars in den mods-Ordner Kopiere:  build/libs/deinmod-xyz.jar  fabric-api-0.140.0+1.21.11.jar (falls benötigt)  in deinen Minecraft mods/ Ordner:  Windows: %appdata%\.minecraft\mods  Linux: ~/.minecraft/mods  macOS: ~/Library/Application Support/minecraft/mods  Launcher starten → Fabric-Profil wählen → Play  Häufige Stolpersteine (wenn’s nicht startet) Falsches Java: Für 1.21.x solltest du JDK 21 nutzen (in IntelliJ und ggf. Launcher).   Falsche MC-Version: Mod/Jar muss genau zu 1.21.11 passen (in fabric.mod.json und Gradle).  Fabric API fehlt: Crash/NoClassDefFound → Fabric API in mods/ nachlegen.   Wenn du mir 1 Screenshot/Logzeile vom Crash gibst (oder die latest.log aus run/logs), sag ich dir sofort, ob es an Java-Version, Loader/Fabric-API oder Mappings liegt.   Du: mit welcher code basis starte ich hier am besten? schreib mir die basis, die ich in repo lee  Minecraf Mods sagte:  Nachgedacht für 8m 53s Am besten startest du nicht bei “leeres Repo”, sondern mit dem Fabric Template Project (damit du Wrapper/Gradle/Run-Konfig direkt richtig hast) – und ersetzt dann den Code durch die folgende Repo-Basis.  Die Versionswahl in der Basis unten ist auf MC 1.21.11, Fabric Loader ~0.18.x, Fabric API ~0.141.x ausgelegt.   Für 1.21.11/obfuscated Builds nutzt Loom inzwischen net.fabricmc.fabric-loom-remap.   0) Minimaler “wie krieg ich’s ins Spiel?”-Loop Projekt öffnen (IntelliJ)  ./gradlew runClient → startet Minecraft mit deinem Mod (Dev)  Für “echtes” .jar: ./gradlew build → build/libs/*.jar nach .minecraft/mods/  1) Repo-Struktur (kopierbar) Lege diese Dateien so an (Mod-ID: sharkengine, package: dev.sharkengine):  sharkengine/   build.gradle   settings.gradle   gradle.properties   src/main/resources/fabric.mod.json   src/main/resources/assets/sharkengine/lang/en_us.json   src/main/resources/assets/sharkengine/blockstates/steering_wheel.json   src/main/resources/assets/sharkengine/models/block/steering_wheel.json   src/main/resources/assets/sharkengine/items/steering_wheel.json   src/main/resources/data/sharkengine/tags/blocks/ship_eligible.json   src/main/java/dev/sharkengine/SharkEngineMod.java   src/main/java/dev/sharkengine/content/ModBlocks.java   src/main/java/dev/sharkengine/content/ModEntities.java   src/main/java/dev/sharkengine/content/ModTags.java   src/main/java/dev/sharkengine/content/block/SteeringWheelBlock.java   src/main/java/dev/sharkengine/net/ModNetworking.java   src/main/java/dev/sharkengine/net/HelmInputC2SPayload.java   src/main/java/dev/sharkengine/ship/ShipAssemblyService.java   src/main/java/dev/sharkengine/ship/ShipBlueprint.java   src/main/java/dev/sharkengine/ship/ShipEntity.java   src/client/java/dev/sharkengine/client/SharkEngineClient.java   src/client/java/dev/sharkengine/client/HelmInputClient.java   src/client/java/dev/sharkengine/client/render/ShipEntityRenderer.java Hinweis: src/client/java funktioniert so mit Loom splitEnvironmentSourceSets().  2) Gradle/Meta settings.gradle pluginManagement {     repositories {         maven { url = "https://maven.fabricmc.net/" }         gradlePluginPortal()         mavenCentral()     } } rootProject.name = "sharkengine" gradle.properties org.gradle.jvmargs=-Xmx2G minecraft_version=1.21.11 fabric_loader_version=0.18.4 fabric_api_version=0.141.3+1.21.11  maven_group=dev.sharkengine archives_base_name=sharkengine mod_version=0.0.1 build.gradle plugins {     id "java"     id "maven-publish"     id "net.fabricmc.fabric-loom-remap" version "1.15-SNAPSHOT" }  version = project.mod_version group = project.maven_group  base {     archivesName = project.archives_base_name }  repositories {     mavenCentral() }  dependencies {     minecraft "com.mojang:minecraft:${project.minecraft_version}"     mappings loom.officialMojangMappings()      modImplementation "net.fabricmc:fabric-loader:${project.fabric_loader_version}"     modImplementation "net.fabricmc.fabric-api:fabric-api:${project.fabric_api_version}" }  loom {     splitEnvironmentSourceSets()      mods {         sharkengine {             sourceSet sourceSets.main             sourceSet sourceSets.client         }     } }  tasks.withType(JavaCompile).configureEach {     options.release = 21     options.encoding = "UTF-8" }  java {     toolchain { languageVersion = JavaLanguageVersion.of(21) }     withSourcesJar() }  processResources {     inputs.property "version", project.version     filesMatching("fabric.mod.json") {         expand "version": project.version     } } src/main/resources/fabric.mod.json {   "schemaVersion": 1,   "id": "sharkengine",   "version": "${version}",   "name": "Shark Engine",   "description": "MVP moving ship contraption prototype",   "authors": ["you"],   "license": "MIT",   "environment": "*",   "entrypoints": {     "main": ["dev.sharkengine.SharkEngineMod"],     "client": ["dev.sharkengine.client.SharkEngineClient"]   },   "depends": {     "minecraft": "1.21.11",     "fabricloader": ">=0.18.0",     "fabric-api": "*"   } } 3) Assets + Tags assets/sharkengine/lang/en_us.json {   "block.sharkengine.steering_wheel": "Steering Wheel",   "message.sharkengine.assembly_ok": "Ship assembled (%s blocks).",   "message.sharkengine.assembly_fail_contact": "Assembly blocked: world contact at %s points.",   "message.sharkengine.assembly_fail_empty": "Nothing to assemble (check eligible tag).",   "message.sharkengine.anchor_on": "Anchor: ON",   "message.sharkengine.anchor_off": "Anchor: OFF" } assets/sharkengine/blockstates/steering_wheel.json {   "variants": {     "": { "model": "sharkengine:block/steering_wheel" }   } } assets/sharkengine/models/block/steering_wheel.json {   "parent": "minecraft:block/cube_all",   "textures": {     "all": "minecraft:block/oak_planks"   } } assets/sharkengine/items/steering_wheel.json {   "model": {     "type": "minecraft:model",     "model": "sharkengine:block/steering_wheel"   } } data/sharkengine/tags/blocks/ship_eligible.json (Sehr grob fürs MVP – erweitern/feiner machen kannst du später.)  {   "replace": false,   "values": [     "#minecraft:planks",     "#minecraft:logs",     "#minecraft:wooden_slabs",     "#minecraft:wooden_stairs",     "#minecraft:wool",     "minecraft:glass"   ] } 4) Java Code (Server/Shared) SharkEngineMod.java package dev.sharkengine;  import dev.sharkengine.content.ModBlocks; import dev.sharkengine.content.ModEntities; import dev.sharkengine.net.ModNetworking; import org.slf4j.Logger; import org.slf4j.LoggerFactory;  public final class SharkEngineMod {     public static final String MOD_ID = "sharkengine";     public static final Logger LOGGER = LoggerFactory.getLogger("SharkEngine");      public static void init() {         ModBlocks.init();         ModEntities.init();         ModNetworking.init();         LOGGER.info("Shark Engine initialized");     } } content/ModTags.java package dev.sharkengine.content;  import dev.sharkengine.SharkEngineMod; import net.minecraft.core.registries.Registries; import net.minecraft.resources.Identifier; import net.minecraft.tags.TagKey; import net.minecraft.world.level.block.Block;  public final class ModTags {     public static final TagKey<Block> SHIP_ELIGIBLE =             TagKey.create(Registries.BLOCK, Identifier.fromNamespaceAndPath(SharkEngineMod.MOD_ID, "ship_eligible"));      private ModTags() {} } content/ModBlocks.java package dev.sharkengine.content;  import dev.sharkengine.SharkEngineMod; import dev.sharkengine.content.block.SteeringWheelBlock; import net.fabricmc.fabric.api.itemgroup.v1.ItemGroupEvents; import net.minecraft.core.Registry; import net.minecraft.core.registries.BuiltInRegistries; import net.minecraft.core.registries.Registries; import net.minecraft.resources.Identifier; import net.minecraft.resources.ResourceKey; import net.minecraft.world.item.BlockItem; import net.minecraft.world.item.CreativeModeTabs; import net.minecraft.world.item.Item; import net.minecraft.world.level.block.Block; import net.minecraft.world.level.block.SoundType; import net.minecraft.world.level.block.state.BlockBehaviour;  import java.util.function.Function;  public final class ModBlocks {     public static final Block STEERING_WHEEL = registerBlock(             "steering_wheel",             SteeringWheelBlock::new,             BlockBehaviour.Properties.of().strength(1.0F).sound(SoundType.WOOD),             true     );      private ModBlocks() {}      public static void init() {         // creative tab         ItemGroupEvents.modifyEntriesEvent(CreativeModeTabs.TOOLS_AND_UTILITIES).register(entries -> {             entries.accept(STEERING_WHEEL.asItem());         });     }      private static Block registerBlock(             String name,             Function<BlockBehaviour.Properties, Block> factory,             BlockBehaviour.Properties props,             boolean registerItem     ) {         Identifier id = Identifier.fromNamespaceAndPath(SharkEngineMod.MOD_ID, name);         ResourceKey<Block> blockKey = ResourceKey.create(Registries.BLOCK, id);          props.setId(blockKey);         Block block = factory.apply(props);          Registry.register(BuiltInRegistries.BLOCK, blockKey, block);          if (registerItem) {             ResourceKey<Item> itemKey = ResourceKey.create(Registries.ITEM, id);             Item.Properties itemProps = new Item.Properties().useBlockDescriptionPrefix().setId(itemKey);             Registry.register(BuiltInRegistries.ITEM, itemKey, new BlockItem(block, itemProps));         }          return block;     } } content/block/SteeringWheelBlock.java package dev.sharkengine.content.block;  import dev.sharkengine.ship.ShipAssemblyService; import net.minecraft.core.BlockPos; import net.minecraft.network.chat.Component; import net.minecraft.server.level.ServerLevel; import net.minecraft.server.level.ServerPlayer; import net.minecraft.world.InteractionHand; import net.minecraft.world.InteractionResult; import net.minecraft.world.entity.player.Player; import net.minecraft.world.level.Level; import net.minecraft.world.level.block.Block; import net.minecraft.world.level.block.state.BlockState; import net.minecraft.world.phys.BlockHitResult;  public final class SteeringWheelBlock extends Block {     public SteeringWheelBlock(Properties properties) {         super(properties);     }      @Override     protected InteractionResult use(             BlockState state,             Level level,             BlockPos pos,             Player player,             InteractionHand hand,             BlockHitResult hit     ) {         if (level.isClientSide) return InteractionResult.SUCCESS;         if (!(level instanceof ServerLevel serverLevel) || !(player instanceof ServerPlayer sp)) {             return InteractionResult.PASS;         }          ShipAssemblyService.AssembleResult res = ShipAssemblyService.tryAssemble(serverLevel, pos, sp);         sp.sendSystemMessage(Component.translatable(res.translationKey(), res.arg()));          return InteractionResult.CONSUME;     } } content/ModEntities.java package dev.sharkengine.content;  import dev.sharkengine.SharkEngineMod; import dev.sharkengine.ship.ShipEntity; import net.minecraft.core.Registry; import net.minecraft.core.registries.BuiltInRegistries; import net.minecraft.resources.Identifier; import net.minecraft.world.entity.EntityType; import net.minecraft.world.entity.MobCategory;  public final class ModEntities {     public static final EntityType<ShipEntity> SHIP = Registry.register(             BuiltInRegistries.ENTITY_TYPE,             Identifier.fromNamespaceAndPath(SharkEngineMod.MOD_ID, "ship"),             EntityType.Builder.<ShipEntity>of(ShipEntity::new, MobCategory.MISC)                     .sized(2.5f, 1.5f)                     .build("sharkengine:ship")     );      private ModEntities() {}      public static void init() {         // nothing yet     } } ship/ShipBlueprint.java package dev.sharkengine.ship;  import net.minecraft.core.BlockPos; import net.minecraft.world.level.block.state.BlockState;  import java.util.List;  public record ShipBlueprint(BlockPos origin, List<ShipBlock> blocks) {     public record ShipBlock(int dx, int dy, int dz, BlockState state) {} } ship/ShipAssemblyService.java package dev.sharkengine.ship;  import dev.sharkengine.content.ModEntities; import dev.sharkengine.content.ModTags; import it.unimi.dsi.fastutil.longs.LongOpenHashSet; import it.unimi.dsi.fastutil.longs.LongSet; import net.minecraft.core.BlockPos; import net.minecraft.core.Direction; import net.minecraft.server.level.ServerLevel; import net.minecraft.server.level.ServerPlayer; import net.minecraft.world.level.block.Blocks; import net.minecraft.world.level.block.state.BlockState; import net.minecraft.world.phys.shapes.CollisionContext;  import java.util.ArrayDeque; import java.util.ArrayList; import java.util.List;  public final class ShipAssemblyService {     // MVP defaults     public static final int MAX_BLOCKS = 512;     public static final int MAX_RADIUS = 32; // Manhattan / BFS depth-ish via distManhattan      private ShipAssemblyService() {}      public record AssembleResult(String translationKey, Object arg) {}      public static AssembleResult tryAssemble(ServerLevel level, BlockPos wheelPos, ServerPlayer pilot) {         // 1) BFS collect         LongSet ship = new LongOpenHashSet();         ArrayDeque<BlockPos> q = new ArrayDeque<>();         q.add(wheelPos);          while (!q.isEmpty() && ship.size() < MAX_BLOCKS) {             BlockPos p = q.poll();             if (p.distManhattan(wheelPos) > MAX_RADIUS) continue;              long key = p.asLong();             if (ship.contains(key)) continue;              BlockState st = level.getBlockState(p);             if (st.isAir()) continue;              // eligibility gate             if (!st.is(ModTags.SHIP_ELIGIBLE)) continue;              ship.add(key);              for (Direction d : Direction.values()) {                 q.add(p.relative(d));             }         }          if (ship.isEmpty()) {             return new AssembleResult("message.sharkengine.assembly_fail_empty", "");         }          // 2) World-contact gate (pragmatic MVP)         int contactPoints = countWorldContacts(level, ship);         if (contactPoints > 0) {             return new AssembleResult("message.sharkengine.assembly_fail_contact", contactPoints);         }          // 3) Snapshot blueprint + remove blocks         List<ShipBlueprint.ShipBlock> blocks = new ArrayList<>(ship.size());         for (var it = ship.iterator(); it.hasNext(); ) {             long key = it.nextLong();             BlockPos p = BlockPos.of(key);             BlockState st = level.getBlockState(p);             blocks.add(new ShipBlueprint.ShipBlock(                     p.getX() - wheelPos.getX(),                     p.getY() - wheelPos.getY(),                     p.getZ() - wheelPos.getZ(),                     st             ));         }          // Remove (NOTE: no block-entity/NBT yet in this MVP base)         for (var it = ship.iterator(); it.hasNext(); ) {             BlockPos p = BlockPos.of(it.nextLong());             level.setBlock(p, Blocks.AIR.defaultBlockState(), 3);         }          // 4) Spawn ship entity         ShipEntity shipEntity = new ShipEntity(ModEntities.SHIP, level);         shipEntity.setPos(wheelPos.getX() + 0.5, wheelPos.getY() + 0.5, wheelPos.getZ() + 0.5);         shipEntity.setYawDeg(pilot.getYRot());         shipEntity.setBlueprint(new ShipBlueprint(wheelPos, blocks));         shipEntity.setPilot(pilot);         level.addFreshEntity(shipEntity);          pilot.startRiding(shipEntity, true);          return new AssembleResult("message.sharkengine.assembly_ok", blocks.size());     }      private static int countWorldContacts(ServerLevel level, LongSet ship) {         int contacts = 0;         CollisionContext ctx = CollisionContext.empty();          for (var it = ship.iterator(); it.hasNext(); ) {             BlockPos p = BlockPos.of(it.nextLong());              for (Direction d : Direction.values()) {                 BlockPos n = p.relative(d);                 if (ship.contains(n.asLong())) continue;                  BlockState ns = level.getBlockState(n);                 if (ns.isAir()) continue;                  // solid-ish world contact                 if (!ns.getCollisionShape(level, n, ctx).isEmpty()) {                     contacts++;                 }             }         }         return contacts;     } } ship/ShipEntity.java package dev.sharkengine.ship;  import net.minecraft.network.chat.Component; import net.minecraft.network.syncher.EntityDataAccessor; import net.minecraft.network.syncher.EntityDataSerializers; import net.minecraft.network.syncher.SynchedEntityData; import net.minecraft.server.level.ServerPlayer; import net.minecraft.world.InteractionHand; import net.minecraft.world.InteractionResult; import net.minecraft.world.entity.Entity; import net.minecraft.world.entity.EntityType; import net.minecraft.world.entity.MoverType; import net.minecraft.world.entity.player.Player; import net.minecraft.world.level.Level; import net.minecraft.world.level.storage.ValueInput; import net.minecraft.world.level.storage.ValueOutput; import net.minecraft.world.phys.Vec3;  import java.util.UUID;  public final class ShipEntity extends Entity {     private static final EntityDataAccessor<Boolean> ANCHORED =             SynchedEntityData.defineId(ShipEntity.class, EntityDataSerializers.BOOLEAN);      private float inputThrottle; // -1..+1     private float inputTurn;     // -1..+1     private ShipBlueprint blueprint; // server-only in this base     private UUID pilot;      public ShipEntity(EntityType<? extends ShipEntity> type, Level level) {         super(type, level);     }      public void setBlueprint(ShipBlueprint blueprint) {         this.blueprint = blueprint;     }      public void setPilot(ServerPlayer sp) {         this.pilot = sp.getUUID();     }      public boolean isPilot(Player p) {         return pilot != null && pilot.equals(p.getUUID());     }      public void setInputs(float throttle, float turn) {         this.inputThrottle = clamp(throttle, -1f, 1f);         this.inputTurn = clamp(turn, -1f, 1f);     }      public void setYawDeg(float yaw) {         this.setYRot(yaw);         this.setXRot(0);     }      public boolean isAnchored() {         return this.entityData.get(ANCHORED);     }      public void toggleAnchor(Player p) {         boolean next = !isAnchored();         this.entityData.set(ANCHORED, next);         if (!level().isClientSide) {             p.sendSystemMessage(Component.translatable(next ? "message.sharkengine.anchor_on" : "message.sharkengine.anchor_off"));         }         if (next) {             setDeltaMovement(Vec3.ZERO);         }     }      @Override     protected void defineSynchedData(SynchedEntityData.Builder builder) {         builder.define(ANCHORED, false);     }      @Override     protected void readAdditionalSaveData(ValueInput input) {         // MVP base: no persistence yet     }      @Override     protected void addAdditionalSaveData(ValueOutput output) {         // MVP base: no persistence yet     }      @Override     public void tick() {         super.tick();          if (level().isClientSide) return;          if (isAnchored()) {             setDeltaMovement(Vec3.ZERO);             return;         }          // Turn         float yaw = this.getYRot() + (inputTurn * 4.0f); // deg/tick         this.setYRot(yaw);          // Forward accel         double rad = Math.toRadians(yaw);         double fx = -Math.sin(rad);         double fz =  Math.cos(rad);          Vec3 accel = new Vec3(fx, 0, fz).scale(inputThrottle * 0.05);         Vec3 vel = this.getDeltaMovement().add(accel);          // Drag         vel = new Vec3(vel.x * 0.90, vel.y * 0.98, vel.z * 0.90);         this.setDeltaMovement(vel);          // Move (vanilla collision against world, with our entity AABB)         this.move(MoverType.SELF, this.getDeltaMovement());     }      @Override     public boolean isPickable() {         return true;     }      @Override     protected InteractionResult interact(Player player, InteractionHand hand) {         if (level().isClientSide) return InteractionResult.SUCCESS;          // Shift-rightclick toggles anchor         if (player.isShiftKeyDown()) {             toggleAnchor(player);             return InteractionResult.CONSUME;         }          // Normal rightclick mounts         player.startRiding(this, true);         return InteractionResult.CONSUME;     }      private static float clamp(float v, float a, float b) {         return Math.max(a, Math.min(b, v));     } } 5) Networking (C2S Helm Input) net/HelmInputC2SPayload.java package dev.sharkengine.net;  import dev.sharkengine.SharkEngineMod; import net.minecraft.network.RegistryFriendlyByteBuf; import net.minecraft.network.codec.ByteBufCodecs; import net.minecraft.network.codec.StreamCodec; import net.minecraft.network.protocol.common.custom.CustomPacketPayload; import net.minecraft.resources.Identifier;  public record HelmInputC2SPayload(float throttle, float turn) implements CustomPacketPayload {     public static final Type<HelmInputC2SPayload> TYPE =             new Type<>(Identifier.fromNamespaceAndPath(SharkEngineMod.MOD_ID, "helm_input"));      public static final StreamCodec<RegistryFriendlyByteBuf, HelmInputC2SPayload> CODEC =             StreamCodec.composite(                     ByteBufCodecs.FLOAT, HelmInputC2SPayload::throttle,                     ByteBufCodecs.FLOAT, HelmInputC2SPayload::turn,                     HelmInputC2SPayload::new             );      @Override     public Type<? extends CustomPacketPayload> type() {         return TYPE;     } } net/ModNetworking.java package dev.sharkengine.net;  import dev.sharkengine.ship.ShipEntity; import net.fabricmc.fabric.api.networking.v1.PayloadTypeRegistry; import net.fabricmc.fabric.api.networking.v1.ServerPlayNetworking; import net.minecraft.server.level.ServerPlayer;  public final class ModNetworking {     private ModNetworking() {}      public static void init() {         PayloadTypeRegistry.playC2S().register(HelmInputC2SPayload.TYPE, HelmInputC2SPayload.CODEC);          ServerPlayNetworking.registerGlobalReceiver(HelmInputC2SPayload.TYPE, (payload, ctx) -> {             ServerPlayer sp = ctx.player();             ctx.server().execute(() -> {                 if (!(sp.getVehicle() instanceof ShipEntity ship)) return;                 if (!ship.isPilot(sp)) return;                 ship.setInputs(payload.throttle(), payload.turn());             });         });     } } 6) Client: Input + Renderer-Stub (damit nix crasht) client/SharkEngineClient.java package dev.sharkengine.client;  import dev.sharkengine.content.ModEntities; import dev.sharkengine.client.render.ShipEntityRenderer; import net.fabricmc.api.ClientModInitializer; import net.minecraft.client.renderer.entity.EntityRenderers;  public final class SharkEngineClient implements ClientModInitializer {     @Override     public void onInitializeClient() {         HelmInputClient.init();          // Minimal renderer: rendert nichts, verhindert aber "missing renderer"-Probleme.         EntityRenderers.register(ModEntities.SHIP, ShipEntityRenderer::new);     } } client/HelmInputClient.java package dev.sharkengine.client;  import dev.sharkengine.net.HelmInputC2SPayload; import dev.sharkengine.ship.ShipEntity; import net.fabricmc.fabric.api.client.event.lifecycle.v1.ClientTickEvents; import net.fabricmc.fabric.api.client.networking.v1.ClientPlayNetworking; import net.minecraft.client.Minecraft; import net.minecraft.client.player.LocalPlayer;  public final class HelmInputClient {     private static float lastT = 0;     private static float lastR = 0;     private static int cooldown = 0;      private HelmInputClient() {}      public static void init() {         ClientTickEvents.END_CLIENT_TICK.register(client -> {             if (cooldown > 0) cooldown--;              LocalPlayer player = client.player;             if (player == null) return;             if (!(player.getVehicle() instanceof ShipEntity)) return;              // Use existing movement keys (WASD)             float throttle = 0;             if (client.options.keyUp.isDown()) throttle += 1;             if (client.options.keyDown.isDown()) throttle -= 1;              float turn = 0;             if (client.options.keyLeft.isDown()) turn += 1;             if (client.options.keyRight.isDown()) turn -= 1;              // Send only if changed or every few ticks             if (cooldown == 0 && (throttle != lastT || turn != lastR)) {                 lastT = throttle;                 lastR = turn;                 cooldown = 2; // ~10Hz at 20tps                 ClientPlayNetworking.send(new HelmInputC2SPayload(throttle, turn));             }         });     } } client/render/ShipEntityRenderer.java package dev.sharkengine.client.render;  import dev.sharkengine.ship.ShipEntity; import net.minecraft.client.renderer.entity.EntityRenderer; import net.minecraft.client.renderer.entity.EntityRendererProvider; import net.minecraft.client.renderer.entity.state.EntityRenderState;  // Minimaler "no-op" Renderer (1.21.11 nutzt RenderStates). public final class ShipEntityRenderer extends EntityRenderer<ShipEntity, EntityRenderState> {     public ShipEntityRenderer(EntityRendererProvider.Context ctx) {         super(ctx);     }      @Override     public EntityRenderState createRenderState() {         return new EntityRenderState();     } } 7) Ganz wichtiger Fix: Mod init “Entry” Fabric ruft dein init() nicht automatisch auf – du brauchst noch den echten ModInitializer-Klasseneintrag.  Ersetze/erstelle dafür:  src/main/java/dev/sharkengine/SharkEngineModEntrypoint.java package dev.sharkengine;  import net.fabricmc.api.ModInitializer;  public final class SharkEngineModEntrypoint implements ModInitializer {     @Override     public void onInitialize() {         SharkEngineMod.init();     } } Und passe fabric.mod.json an:  "entrypoints": {   "main": ["dev.sharkengine.SharkEngineModEntrypoint"],   "client": ["dev.sharkengine.client.SharkEngineClient"] } 8) Test im Spiel (MVP-Basis) Starte runClient  Gib dir das Steuerrad: /give @s sharkengine:steering_wheel  Baue ein kleines “Boot” aus planks/logs/wool/glass (Tag ship_eligible)  Setz das Steuerrad in die Struktur  Rechtsklick aufs Steuerrad → Struktur wird entfernt, ShipEntity gespawnt, du reitest drauf  Während du reitest: W/S = throttle, A/D = yaw, Shift+Rechtsklick auf die Entity = Anchor toggle  Für Sichtbarkeit: F3 + B (Hitbox), bis du später echtes Block-Rendering einbaust